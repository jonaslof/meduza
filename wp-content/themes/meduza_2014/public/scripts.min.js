!function(a){var b=function(b,d){var e=this;if($slider=a(b),settings=a.extend({},a.fn.alimentaImageSlider.defaults,d),timer=new c,slides=new Array,currentSlideIndex=0,$slider.prepend('<div class="slider-image-container"></div>'),$sliderImageContainer=a(".slider-image-container"),$slider.append('<div class="slider-caption"><div class="slider-caption-inner"><div id="slider-caption-content" class="slider-caption-content"></div><ul id="slider-nav" class="slider-nav"></ul></div></div>'),$sliderCaption=a("#slider-caption-content"),$sliderNav=a("#slider-nav"),null!=settings.dataUrl){var f=e.getSliderData(settings.dataUrl);e.addSlides(f)}$sliderNav.on("click",".slider-nav-item",function(){e.changeSlide(a(this).data("index")),$sliderNav.find(".slider-nav-item").removeClass("current"),a(this).addClass("current")})},c=function(){this.set=function(a,b){return this.action=a,this.interval=b,this},this.start=function(){return this.isActive=!0,this.timeoutObject=setTimeout(this.action,this.interval),this},this.stop=function(){return clearTimeout(this.timeoutObject),this.isActive=!1,this},this.reset=function(){return this.isActive?(clearTimeout(this.timeoutObject),this.start()):this.start(),this}};b.prototype={getSliderData:function(b){return a.getJSON(b)},addSlides:function(b){var c=this;b.success(function(b){if("ok"==b.status){var d=0;a.each(b.posts,function(){slides[d]={index:d,id:this.id,title:this.title,content:this.content,excerpt:this.excerpt,image:this.image,url:this.url},0==d?(c.initSlide(),timer.set(c.changeSlide,5e3),timer.start(),$sliderNav.append('<li id="slider-nav-item-'+d+'" class="slider-nav-item current" data-index="'+d+'"></li>')):$sliderNav.append('<li id="slider-nav-item-'+d+'" class="slider-nav-item" data-index="'+d+'"></li>'),d++})}})},initSlide:function(){$sliderImageContainer.prepend('<div class="slide-image" id="slide-'+currentSlideIndex+'"><a href="'+slides[currentSlideIndex].url+'" title="'+slides[currentSlideIndex].title+'"><img src="'+slides[currentSlideIndex].image+'"></a></div>'),$sliderCaption.prepend('<div class="slider-caption-content-inner" id="slide-content-'+currentSlideIndex+'"><a href="'+slides[currentSlideIndex].url+'" title="'+slides[currentSlideIndex].title+'"><h2 class="slider-caption-content-title">'+slides[currentSlideIndex].title+'</h2><p class="slider-caption-content-text">'+slides[currentSlideIndex].excerpt+"</p></a></div>"),currentSlideIndex++},changeSlide:function(b){var c=a(".slide-image"),d=a(".slider-caption-content-inner");b&&(currentSlideIndex=b),slides.length==currentSlideIndex&&(currentSlideIndex=0),$sliderImageContainer.prepend('<div class="slide-image" id="slide-'+currentSlideIndex+'" style="display: none"><a href="'+slides[currentSlideIndex].url+'" title="'+slides[currentSlideIndex].title+'"><img src="'+slides[currentSlideIndex].image+'"></a></div>'),$sliderCaption.append('<div class="slider-caption-content-inner" id="slide-content-'+currentSlideIndex+'" style="display: none;"><a href="'+slides[currentSlideIndex].url+'" title="'+slides[currentSlideIndex].title+'"><h2 class="slider-caption-content-title">'+slides[currentSlideIndex].title+'</h2><p class="slider-caption-content-text">'+slides[currentSlideIndex].excerpt+"</p></a></div>"),"fade"===settings.transition&&(a("#slide-"+currentSlideIndex).fadeIn(settings.transitionSpeed),c.fadeOut(settings.transitionSpeed,function(){a(this).remove()}),d.fadeOut(settings.transitionSpeed/2,function(){a(this).next().fadeIn(settings.transitionSpeed/2),a(this).remove()})),timer.isActive?timer.reset():timer.start(),a(".slider-nav-item").removeClass("current"),a("#slider-nav-item-"+currentSlideIndex).addClass("current"),currentSlideIndex++}},a.fn.alimentaImageSlider=function(c){return this.each(function(){a(this).data("alimentaImageSlider",new b(this,c))})},a.fn.alimentaImageSlider.defaults={dataUrl:null,transition:"fade",transitionSpeed:400}}(jQuery),function($){$.timer=function(func,time,autostart){return this.set=function(func,time,autostart){if(this.init=!0,"object"==typeof func){var paramList=["autostart","time"];for(var arg in paramList)void 0!=func[paramList[arg]]&&eval(paramList[arg]+" = func[paramList[arg]]");func=func.action}return"function"==typeof func&&(this.action=func),isNaN(time)||(this.intervalTime=time),autostart&&!this.isActive&&(this.isActive=!0,this.setTimer()),this},this.once=function(a){var b=this;return isNaN(a)&&(a=0),window.setTimeout(function(){b.action()},a),this},this.play=function(a){return this.isActive||(a?this.setTimer():this.setTimer(this.remaining),this.isActive=!0),this},this.pause=function(){return this.isActive&&(this.isActive=!1,this.remaining-=new Date-this.last,this.clearTimer()),this},this.stop=function(){return this.isActive=!1,this.remaining=this.intervalTime,this.clearTimer(),this},this.toggle=function(a){return this.isActive?this.pause():a?this.play(!0):this.play(),this},this.reset=function(){return this.isActive=!1,this.play(!0),this},this.clearTimer=function(){window.clearTimeout(this.timeoutObject)},this.setTimer=function(a){var b=this;"function"==typeof this.action&&(isNaN(a)&&(a=this.intervalTime),this.remaining=a,this.last=new Date,this.clearTimer(),this.timeoutObject=window.setTimeout(function(){b.go()},a))},this.go=function(){this.isActive&&(this.action(),this.setTimer())},this.init?new $.timer(func,time,autostart):(this.set(func,time,autostart),this)}}(jQuery),function(a){a.fn.stickIt=function(b){var c=a.extend({headerSelector:"#header","float":"right",gridContainer:"#content",gridContainerPadding:30},b),d=function(){var b=a(this),d=a(window).scrollTop(),e=a(c.headerSelector).outerHeight(),f=a(window).width(),g=a(c.gridContainer).width(),h=(f-g+c.gridContainerPadding)/2;e>d?(b.removeClass("is-sticky"),b.css(c.float,c.gridContainerPadding),b.css("top","100%")):(b.addClass("is-sticky"),b.css(c.float,h+"px"),a("body").hasClass("admin-bar")?b.css("top","32px"):b.css("top","0px"))};return this.each(function(){a(window).on("scroll",a.proxy(d,this)),a(window).on("resize",a.proxy(d,this)),a.proxy(d,this)()})}}(jQuery),function(a){a(document).ready(function(){for(var b=document.getElementsByTagName("form"),c=0;c<b.length;c++)b[c].noValidate=!0,b[c].addEventListener?b[c].addEventListener("submit",function(b){b.target.checkValidity()||(b.preventDefault(),$this=a(this),$this.find(".form-validation-message").remove(),$this.find("input.error").removeClass("error"),a.each($this.find("input[required]"),function(){""===a(this).val()&&($this=a(this),$this.addClass("error"),$this.after('<div class="form-validation-message error">Du måste fylla i det här fältet.</div>'))}))},!1):b[c].attachEvent("onsubmit",function(b){b.target.checkValidity()||(b.preventDefault(),$this=a(this),$this.find(".form-validation-message").remove(),$this.find("input.error").removeClass("error"),a.each($this.find("input[required]"),function(){""===a(this).val()&&($this=a(this),$this.addClass("error"),$this.after('<div class="form-validation-message error">Du måste fylla i det här fältet.</div>'))}))});a("#article-search").on("change","#article-search-select-category",function(){var b=a(this).val();a("#article-search-select-subcategory").val(a("#article-search-select-subcategory option:first").val()),"alla"==b?a("#hidden-article-category").remove():a("#hidden-article-category").val(b),a("#article-search").submit()}),a("#article-search").on("change","#article-search-select-subcategory",function(){var b=a(this).val();console.log(b),a("#hidden-article-category").val("none"==b?a("#article-search-select-category").val():a(this).val()),a("#article-search").submit()}),a("#article-search").on("click",".article-tag-label",function(){a(this).toggleClass("checked")}),a("#article-search").on("change",".article-tag-checkbox",function(){a("#article-search").submit()}),a(".gallery-thumbnails").on("click","img",function(){a(this).siblings().addClass("is-not-current"),a(this).removeClass("is-not-current"),$currentImage=a(".gallery-featured.current"),a(".gallery").append('<div class="gallery-featured incoming" style="position: absolute; top: 0px; z-index: -1;"><img src="'+a(this).attr("data-image-large-src")+'" width="'+a(this).attr("data-image-large-src")+'" height="'+a(this).attr("data-image-large-src")+'"></div>'),$currentImage.fadeOut(400,function(){a(this).remove(),a(".gallery-featured.incoming").css({position:"relative","z-index":"0"}).removeClass("incoming").addClass("current")})}),a(".create-tag").on("click",function(){var b=a(this),c=b.data("article");siteurl=a("#site-url").data("url");a.get(siteurl+"/wp-content/themes/alimenta/article-price-popup.php?article_id="+c+"&position=above",function(a){b.parent().prepend(a)})}),a("body").delegate(".article-price-form","submit",function(b){b.preventDefault();var c=a(this),d=(c.data("article"),c.find(".amount").val()),e=c.find(".total-price").val(),f=c.find(".unit-price").val(),g=a("#site-url").data("url"),h=g+"/wp-content/themes/alimenta/functions/add_to_print_list.php?action=add&post_id="+a(this).data("article")+"&amount="+d+"&total_price="+e+"&unit_price="+f;a.getJSON(h,function(b){if("added"===b.status){var d=a("#print-list");d.show();var e=d.find(".tags-count"),f=parseInt(e.text()),g='<div class="print-list-item-title">'+b.tag.artnr+" "+b.tag.title;(""!=b.tag.price.total_price||""!=b.tag.price.amount||""!=b.tag.price.unit_price)&&(g+='<br><span class="print-list-item-price">',""!=b.tag.price.total_price&&(g+=b.tag.price.total_price+":- "),""!=b.tag.price.amount&&(g+="för "+b.tag.price.amount+" st. "),""!=b.tag.price.unit_price&&(g+="Styckepris "+b.tag.price.unit_price+":-"),g+="</span>"),g+="</div>",d.find(".print-list-items").append('<li class="print-list-item" id="print-list-item-'+b.tag.ID+'">'+g+'<button class="btn btn-remove remove-from-print-list" data-article="'+b.tag.ID+'"><div class="icon dashicons dashicons-trash"></div></button></li>'),e.text(f+1),c.parent().parent().remove()}})}),a("body").delegate(".article-price-popup-close","click",function(){a(this).parent().parent().remove()}),a("body").delegate(".add-to-print-list","click",function(){var b=a("#site-url").data("url"),c=b+"/wp-content/themes/alimenta/functions/add_to_print_list.php?action=add&post_id="+a(this).data("article");a.getJSON(c,function(b){if("added"===b.status){var c=a("#print-list");c.show();var d=c.find(".tags-count"),e=parseInt(d.text());c.find(".print-list-items").append('<li class="print-list-item" id="print-list-item-'+b.tag.ID+'"><div class="print-list-item-title">'+b.tag.artnr+" "+b.tag.title+'</div><button class="btn btn-remove remove-from-print-list" data-article="'+b.tag.ID+'"><div class="icon dashicons dashicons-trash"></div></button></li>'),d.text(e+1),a(".article-price-popup").remove()}})}),a("#print-list").delegate(".remove-from-print-list","click",function(){var b=a("#site-url").data("url"),c=b+"/wp-content/themes/alimenta/functions/add_to_print_list.php?action=delete&post_id="+a(this).data("article");a.getJSON(c,function(b){if("deleted"===b.status){var c=a("#print-list"),d=c.find(".tags-count"),e=parseInt(d.text());c.find("#print-list-item-"+b.tag.ID).remove(),d.text(e-1),1==e&&c.hide()}})}),a("#print-list").on("mouseover",function(){a(this).find(".print-list-items").show()}).on("mouseout",function(){a(this).find(".print-list-items").hide()}),a(".order-form-search").delegate(".add-to-order-form","click",function(){var b=a(this),c=b.parent(),d=a(".order-form-articles");if(c.data("categories").indexOf("Tårtor")>=0){var e='<div class="order-form-article">';e+='<label for="article-'+c.data("article")+'" class="order-form-article-label">',e+='<input type="checkbox" checked="checked" name="articles['+c.data("article")+'][id]" id="article-'+c.data("article")+'" class="checkbox" value="'+c.data("article")+'">',e+=c.data("artnr")+" "+c.data("title")+"</label>",e+='<label class="label-short label-amount visible-in-ie ie-inline-block">Antal: </label>',e+='<input type="number" name="articles['+c.data("article")+'][amount]" class="input-text order-form-article-amount" placeholder="Antal">',e+='<label for="cake-text-'+c.data("article")+'" class="cake-text-description"><small>Om du vill ha text på tårtan. Ange vad det ska stå och hur många av tårtorna som ska ha texten.</small></label>',e+='<textarea name="articles['+c.data("article")+'][caketext]" class="input-text input-textarea" rows="2" cols="50"></textarea>',e+="</div>",d.append(e)}else{var e='<div class="order-form-article">';e+='<label for="article-'+c.data("article")+'" class="order-form-article-label">',e+='<input type="checkbox" checked="checked" name="articles['+c.data("article")+'][id]" id="article-'+c.data("article")+'" class="checkbox" value="'+c.data("article")+'">',e+=c.data("artnr")+" "+c.data("title")+"</label>",e+='<label class="label-short label-amount visible-in-ie ie-inline-block">Antal: </label>',e+='<input type="number" name="articles['+c.data("article")+'][amount]" class="input-text order-form-article-amount" placeholder="Antal">',e+="</div>",d.append(e)}a(".order-form-search-list").empty()}),a("#order-form-search").on("keyup",function(){var b=a(this),c=b.data("script"),e=b.val(),f=a(".order-form-search-list");f.addClass("is-loading"),d(function(){a.getJSON(c+"?s="+e,function(b){"ok"==b.status?(f.find(".order-form-search-list-item").remove(),a.each(b.posts,function(){var a=this;0==f.find("#item-"+a.id).length&&f.prepend('<li class="order-form-search-list-item" id="item-'+a.id+'" data-title="'+a.title+'" data-article="'+a.id+'" data-artnr="'+a.artnr+'" data-categories="'+a.categories+'"><div class="order-form-search-list-item-title">'+a.artnr+" "+a.title+'</div><button class="btn btn-primary btn-small add-to-order-form">Lägg till</button></li>')})):"error"==b.status&&0==f.find("#nothing").length&&(f.find(".order-form-search-list-item").remove(),f.prepend('<li id="nothing" class="order-form-search-list-item"><div class="order-form-search-list-item-title">Inga artiklar hittades</div></li>'))})},300)});var d=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}();a("#print-list").stickIt()})}(jQuery);